# ğŸ’š 1014. å¹³è¡¡ä¸‰è¿›åˆ¶ II

**å•ç‚¹æ—¶é™:** 2.0 sec

**å†…å­˜é™åˆ¶:** 512 MB

å¹³è¡¡ä¸‰è¿›åˆ¶è®°æ•°ç³»ç»Ÿä»¥ $$3$$ ä¸ºåŸºæ•°ï¼Œä½†å…¶æ•°ç ä¸æ˜¯ä½¿ç”¨æ•°å­— $$0$$ã€$$1$$ å’Œ $$2$$ ï¼Œè€Œæ˜¯ç”¨æ•°å­—$$âˆ’1$$ã€$$0$$ å’Œ $$1$$ æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ç ã€‚

ä¸‹è¡¨ç»™å‡ºå¹³è¡¡ä¸‰è¿›åˆ¶æ•°å¯¹åº”çš„åè¿›åˆ¶æ•°ï¼Œå…¶ä¸­æˆ‘ä»¬ä»¥ 2 è¡¨ç¤º âˆ’1ã€‚

|      å¹³è¡¡ä¸‰è¿›åˆ¶      |         åè¿›åˆ¶        |
| :-------------: | :----------------: |
| ****$$102$$**** |        $$8$$       |
|   $$1120.22$$   |  $$32\frac{5}{9}$$ |
|   $$2210.11$$   | $$âˆ’32\frac{5}{9}$$ |

ä¾‹å¦‚ï¼š $$32\frac{5}{9}=1Ã—3^3+1Ã—3^2+(âˆ’1)Ã—3^1+(âˆ’1)Ã—3^{âˆ’1}+(âˆ’1)Ã—3^{âˆ’2}$$ã€‚

ä¸€ä¸ªåè¿›åˆ¶æ•°è½¬æ¢ä¸ºå¹³è¡¡ä¸‰è¿›åˆ¶æ•°çš„ä¸€ç§æ–¹æ³•ä¸ºï¼š

1ã€å…ˆå°†è¯¥åè¿›åˆ¶æ•°è¡¨ç¤ºæˆæ™®é€šçš„ä¸‰è¿›åˆ¶æ•°

ä¾‹å¦‚ï¼š$$32\frac{5}{9}=(1012.12)_3$$

2ã€å°†å¾—åˆ°çš„ä¸‰è¿›åˆ¶æ•°ä¸å…¨1åºåˆ—æŒ‰ `ä¸‰è¿›åˆ¶è®°æ•°ç³»ç»Ÿçš„è§„åˆ™` ç›¸åŠ 

$$1012.12+1111.11=2201.00$$

3ã€å°†ç¬¬2æ­¥å¾—åˆ°çš„åºåˆ—ä¸å…¨1åºåˆ—æŒ‰ä½ç‹¬ç«‹ç›¸å‡

$$2201.00âˆ’1111.11=1,1,âˆ’1,0,\dots,âˆ’1,âˆ’1$$ï¼Œ$$âˆ’1$$ ç”¨ $$2$$ è¡¨ç¤ºåä¸º $$1120.22$$

è¾“å…¥ä¸€ä¸ªåè¿›åˆ¶æ•°ï¼Œè¯·å°†å…¶è½¬æˆå¯¹åº”çš„å¹³è¡¡ä¸‰è¿›åˆ¶æ•°ã€‚

### è¾“å…¥æ ¼å¼

åœ¨ä¸€è¡Œä¸­è¾“å…¥ä¸€ä¸ªåè¿›åˆ¶æ•° $$\frac{A}{B}$$ å…¶ä¸­ $$A,B$$ ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œä¸”ä¿è¯$$B$$ ä¸€å®šæ˜¯ä¸‰è¿›åˆ¶çš„è‡ªç„¶æ•°æ¬¡å¹‚ï¼Œå³ $$B=3k,kâˆˆN$$ ã€‚

| **ä»»åŠ¡å¾—åˆ†** |     $$A,B$$    |
| :------: | :------------: |
|  $$50$$  |  $$0â‰¤A,Bâ‰¤30$$  |
|  $$50$$  | $$0â‰¤A,Bâ‰¤10^9$$ |

### è¾“å‡ºæ ¼å¼

åœ¨ä¸€è¡Œä¸­è¾“å‡ºå¯¹åº”çš„å¹³è¡¡ä¸‰è¿›åˆ¶æ•°ï¼Œç”¨ $$2$$ è¡¨ç¤º $$âˆ’1$$ï¼Œä¸‰è¿›åˆ¶æ•°åº”å½“æ˜¯æœ€ç®€å•çš„ï¼Œä¾‹å¦‚:

* $$01000$$ åº”è¯¥è¾“å‡º $$1000$$;
* $$0.111100$$ åº”è¯¥è¾“å‡º $$0.1111$$ .

### æ ·ä¾‹

{% tabs %}
{% tab title="æ ·ä¾‹1" %}
{% code title="input" %}
```
8 1
```
{% endcode %}

{% code title="output" %}
```
102
```
{% endcode %}
{% endtab %}

{% tab title="æ ·ä¾‹2" %}
{% code title="input" %}
```
293 9
```
{% endcode %}

{% code title="output" %}
```
1120.22
```
{% endcode %}
{% endtab %}

{% tab title="æ ·ä¾‹3" %}
{% code title="input" %}
```
8 9
```
{% endcode %}

{% code title="output" %}
```
1.02
```
{% endcode %}
{% endtab %}
{% endtabs %}

{% hint style="info" %}
æœ¬é¢˜ä¸é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚
{% endhint %}

### é¢˜è§£

{% code lineNumbers="true" %}
```c
#include <stdio.h>
#include <math.h>
#define N 200
typedef long long int lli;

lli gcd(lli a, lli b)
{
	return (a % b == 0) ? b : gcd(b, a % b);
}


int main(void)
{
	lli n1, n2;
	scanf("%lld %lld", &n1, &n2);
	int sig = n1 * n2 < 0 ? -1 : 1;
	n1 = abs(n1), n2 = abs(n2);
	lli intnum = n1 / n2;
	n1 -= (intnum * n2);
	lli g = gcd(n1, n2);
	n1 /= g, n2 /= g;
	int fracLen = log10(n2) / log10(3);
	int intLen = intnum == 0 ? 1 : ceil(log10(intnum)/ log10(3)) + 1;
	lli inte[N] = {0}, frac[N] = {0};
	
	for(lli i = N - 1, t = intnum; i >= 0 ; i --){
		inte[i] = t % 3;
		t /= 3;
		if(t == 0){
			break;
		}
	}
	
	for(lli i = N - 1, t = n1; i >= 0 ; i --){
		frac[i] = t % 3;
		t /= 3;
		if(t == 0){
			break;
		}
	}
	
	for(lli i = N - 1, cnt = 0; i >= 0 && cnt < fracLen; i --, cnt ++){
		frac[i] += 1;
		for(lli j = i; j > 0 && frac[j] > 2; j --){
			frac[j] %= 3;
			frac[j - 1] += 1;
		}
	}
	
	lli carry = frac[N - 1 - fracLen];
	frac[N - 1 - fracLen] = 0;
	for(lli i = N - 1, cnt = 0; i >= 0 && cnt < intLen; i --, cnt ++){
		if(cnt == intLen - 1 && inte[i] == 0 && carry == 0){
			break;
		}
		inte[i] += (1 + carry);
		carry = 0;
		for(lli j = i; j > 0 && inte[j] > 2; j --){
			inte[j] %= 3;
			inte[j - 1] += 1;
			if(j - 1 < N - intLen){
				intLen ++;
			}
		}		
	}
	
	lli idx = 0;
	for(idx; idx < N && inte[idx] == 0; idx ++);
	if(idx == N){
		printf("0");
	}else{
		if(sig == 1){
			for(idx ; idx < N; idx ++){
				printf("%d", (inte[idx] + 2) % 3);
			}	
		}else{
			for(idx ; idx < N; idx ++){
				if(inte[idx] == 2){
					printf("2");
				}else if(inte[idx] == 1){
					printf("0");
				}else{
					printf("1");
				}
			}			
		}
	}
	if(fracLen != 0){
		printf(".");
		if(sig == 1){
			for(idx = N - fracLen ; idx < N; idx ++){
				printf("%d", (frac[idx] + 2) % 3);
			}	
		}else{
			for(idx = N - fracLen ; idx < N; idx ++){
				if(frac[idx] == 2){
					printf("2");
				}else if(frac[idx] == 1){
					printf("0");
				}else{
					printf("1");
				}
			}			
		}
	}
	
	return 0;
}
```
{% endcode %}
